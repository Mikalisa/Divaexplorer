{% extends "layout.html" %}

{% block title %}
    Posts
{% endblock %}

{% block main %}


<pre>






</pre>

<form action="/archive" method="get">
  <!-- Page Content -->
  <div class="container">

    <div class="row">

      <!-- Post Content Column -->
      <div class="col-lg-8">

        <!-- Title -->
        <h1 class="mt-4">{{post.title}}</h1>

        <pre>
        	
        </pre>

        <!-- Author -->
        <p class="lead">
          by
          <a href="#">Sharon Williams</a>
        </p>

        <hr>

     

        <!-- Date/Time -->
        <p>{{post.posted_time.strftime('%B %d, %Y')}}</p>

        <hr>

        <!-- Preview Image -->
        <!-- <img class="img-fluid rounded" src="http://placehold.it/900x300" alt=""-->

        

        {% if post.youtube_link is not none %}

        <iframe width="700" height="345" src="https://www.youtube.com/embed/{{post.youtube_link}}">
        </iframe>

        <hr>
        
        {% else %}
        

       {% endif %}

       

        

        <!-- Post Content -->
    
        <p style="white-space:pre-line;">{{post.content}}</p>
        	
        
       
        


        

      
</form>

        <!-- Comments Form -->
        
        <div class="card my-4">
          <h5 class="card-header">Leave a Comment:</h5>
          <div class="card-body">
            <form action="/post" method="POST">
              <div class="form-group">
              	<input type="hidden" name="post_id" value="{{post.id}}">
                <p>You need to login first!</p>
                
              </div>
              <a class="button" href="{{url_for('main.login', post_id=post.id)}}">Google Login</a>
               </form>
            
          </div>
        </div>


        {%for comment in comments.all()%}
         

        <!-- Single Comment -->
        
        {% if comment.replies.all() is none %}
        <div class="media mb-4">
          <img style="width: 50px;
    height: 50px;" class="d-flex mr-3 rounded-circle" src="{{comment.author.user_photo}}" alt="">
          <div class="media-body">
            <h5 class="mt-0">{{comment.author.user_name}}</h5>
            {{comment.content}}
          </div>
        </div>


        {% else %}



        <!-- Comment with nested comments -->
        <div class="media mb-4">
          <img style="width: 50px;
          height: 50px;" class="d-flex mr-3 rounded-circle" class="d-flex mr-3 rounded-circle" src="{{comment.author.user_photo}}" alt="">
          <div class="media-body">
            <h5 class="mt-0">{{comment.author.user_name}}</h5>
           <p>{{comment.timestamp}}</p>

            {{comment.content}} <br>
            

        
           {%for reply in comment.replies.all()%}
            

            <div class="media mt-4">
              <img style="width: 50px;
    height: 50px;" class="d-flex mr-3 rounded-circle" src="{{comment.author.user_photo}}" alt="">
              <div class="media-body">
                <h5 class="mt-0">{{reply.author.user_name}}</h5>
                {{reply.content}}
              </div>
            </div>
          
            {% endfor %}

            {% endif %}


          </div>
        </div>

        {% endfor %}

      </div>
     




      <!-- Sidebar Widgets Column -->
      <div class="col-md-4">


       

        <!-- Side Widget -->
        <div class="card my-4">
          <h5 class="card-header">Side Widget</h5>
          <div class="card-body">
            You can put anything you want inside of these side widgets. They are easy to use, and feature the new Bootstrap 4 card containers!
          </div>
        </div>

      </div>

    </div>
    <!-- /.row -->

  </div>
  <!-- /.container -->


  {% endblock %}
